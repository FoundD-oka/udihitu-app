{"ast":null,"code":"var _jsxFileName = \"/Users/m1_mini/Git/udihitu-app/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport './App.css';\nimport DrawingCanvas from './DrawingCanvas';\nimport ControlButtons from './ControlButtons';\nimport { loadCharacterData, getRandomCharacter, getStrokeCount } from './characterData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [currentChar, setCurrentChar] = useState('');\n  const [stage, setStage] = useState(0);\n  const [maxStage, setMaxStage] = useState(1);\n  const [characterData, setCharacterData] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const drawingCanvasRef = useRef();\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setIsLoading(true);\n        const data = await loadCharacterData();\n        setCharacterData(data);\n        const initialChar = getRandomCharacter(data);\n        setCurrentChar(initialChar);\n        setMaxStage(getStrokeCount(initialChar, data));\n      } catch (err) {\n        console.error('Error loading character data:', err);\n        setError('データの読み込みに失敗しました。');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    loadData();\n  }, []);\n  const handleNext = useCallback(() => {\n    setStage(prevStage => Math.min(prevStage + 1, maxStage - 1));\n  }, [maxStage]);\n  const handleClear = useCallback(() => {\n    if (drawingCanvasRef.current) {\n      drawingCanvasRef.current.clearCanvas();\n    }\n  }, []);\n  const handleNextCharacter = useCallback(() => {\n    const newChar = getRandomCharacter(characterData);\n    setCurrentChar(newChar);\n    setMaxStage(getStrokeCount(newChar, characterData));\n    setStage(0);\n    if (drawingCanvasRef.current) {\n      drawingCanvasRef.current.clearCanvas();\n    }\n  }, [characterData]);\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Error: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"UDHituAStd \\u6F22\\u5B57\\u5B66\\u7FD2\\u30A2\\u30D7\\u30EA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"character-display\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"udihitu-font\",\n          children: characterData[currentChar] ? characterData[currentChar].slice(0, stage + 1).join('') : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u6587\\u5B57: \", currentChar, \" (\\u9032\\u6357: \", stage + 1, \"/\", maxStage, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DrawingCanvas, {\n        ref: drawingCanvasRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ControlButtons, {\n        onNext: handleNext,\n        onClear: handleClear,\n        onNextCharacter: handleNextCharacter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"+PBmq3pxSYjZ12DhupFzn1L8XUU=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","DrawingCanvas","ControlButtons","loadCharacterData","getRandomCharacter","getStrokeCount","jsxDEV","_jsxDEV","App","_s","currentChar","setCurrentChar","stage","setStage","maxStage","setMaxStage","characterData","setCharacterData","isLoading","setIsLoading","error","setError","drawingCanvasRef","loadData","data","initialChar","err","console","handleNext","prevStage","Math","min","handleClear","current","clearCanvas","handleNextCharacter","newChar","children","fileName","_jsxFileName","lineNumber","columnNumber","className","slice","join","ref","onNext","onClear","onNextCharacter","_c","$RefreshReg$"],"sources":["/Users/m1_mini/Git/udihitu-app/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport './App.css';\nimport DrawingCanvas from './DrawingCanvas';\nimport ControlButtons from './ControlButtons';\nimport { loadCharacterData, getRandomCharacter, getStrokeCount } from './characterData';\n\nfunction App() {\n  const [currentChar, setCurrentChar] = useState('');\n  const [stage, setStage] = useState(0);\n  const [maxStage, setMaxStage] = useState(1);\n  const [characterData, setCharacterData] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const drawingCanvasRef = useRef();\n\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setIsLoading(true);\n        const data = await loadCharacterData();\n        setCharacterData(data);\n        const initialChar = getRandomCharacter(data);\n        setCurrentChar(initialChar);\n        setMaxStage(getStrokeCount(initialChar, data));\n      } catch (err) {\n        console.error('Error loading character data:', err);\n        setError('データの読み込みに失敗しました。');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    loadData();\n  }, []);\n  \n  const handleNext = useCallback(() => {\n    setStage((prevStage) => Math.min(prevStage + 1, maxStage - 1));\n  }, [maxStage]);\n\n  const handleClear = useCallback(() => {\n    if (drawingCanvasRef.current) {\n      drawingCanvasRef.current.clearCanvas();\n    }\n  }, []);\n\n  const handleNextCharacter = useCallback(() => {\n    const newChar = getRandomCharacter(characterData);\n    setCurrentChar(newChar);\n    setMaxStage(getStrokeCount(newChar, characterData));\n    setStage(0);\n    if (drawingCanvasRef.current) {\n      drawingCanvasRef.current.clearCanvas();\n    }\n  }, [characterData]);\n\n  if (isLoading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error}</div>;\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>UDHituAStd 漢字学習アプリ</h1>\n      </header>\n      <main>\n        <div className=\"character-display\">\n          <span className=\"udihitu-font\">\n            {characterData[currentChar] ? characterData[currentChar].slice(0, stage + 1).join('') : ''}\n          </span>\n          <p>文字: {currentChar} (進捗: {stage + 1}/{maxStage})</p>\n        </div>\n        <DrawingCanvas ref={drawingCanvasRef} />\n        <ControlButtons \n          onNext={handleNext} \n          onClear={handleClear} \n          onNextCharacter={handleNextCharacter}\n        />\n      </main>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}